<VirtualHost *:80>
    DocumentRoot /app/www
    ServerName localhost

    ErrorLog "/app/logs/apache/errors.log"
    CustomLog "/app/logs/apache/access.log" common

    ProxyPassMatch "^/(.*\.php(/.*)?)$" "fcgi://php:9000/app/www/$1" nocanon

    <Directory /app/www>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<IfModule mod_ssl.c>
    <VirtualHost *:443>
        DocumentRoot /app/www
        ServerName localhost

        ErrorLog "/app/logs/apache/ssl_errors.log"
        CustomLog "/app/logs/apache/ssl_access.log" common

        SSLEngine on
        SSLCertificateFile /usr/local/apache2/conf/server.crt
        SSLCertificateKeyFile /usr/local/apache2/conf/server.key

        ProxyPassMatch "^/(.*\.php(/.*)?)$" "fcgi://php:9000/app/www/$1" nocanon

        <Directory /app/www>
            Options Indexes FollowSymLinks
            AllowOverride All
            Require all granted
        </Directory>
    </VirtualHost>
</IfModule>
