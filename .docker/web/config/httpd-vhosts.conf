<VirtualHost *:80>
    DocumentRoot /app/www/www
    ServerName localhost

    ErrorLog logs/apache-error.log
    TransferLog logs/apache-access.log

    <FilesMatch \.php$>
        SetHandler "proxy:unix:/run/php/fpm.sock|fcgi://localhost"
    </FilesMatch>

    <Directory /app/www/www>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    DocumentRoot /app/www/www
    ServerName localhost

    ErrorLog logs/apache-ssl-error.log
    TransferLog logs/apache-ssl-access.log

    SSLEngine on
    SSLCertificateFile /etc/ssl/apache2/server.pem
    SSLCertificateKeyFile /etc/ssl/apache2/server.key

    <FilesMatch \.php$>
        SetHandler "proxy:unix:/run/php/fpm.sock|fcgi://localhost"
    </FilesMatch>

    # Header always set Strict-Transport-Security "max-age=31536000"

    <Directory "/app/www/www">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
